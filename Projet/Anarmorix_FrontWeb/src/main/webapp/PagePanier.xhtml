<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html">
<ui:composition template="WEB-INF/templates/masterPageCatalogue.xhtml">
	<ui:define name="css">
	<link href="cssPanier/style.default.css" rel="stylesheet" id="theme-stylesheet"></link>
		<!-- your stylesheet with modifications -->
	<link rel="stylesheet" href="cssPanier/suggestion.css"></link>
	<link href="cssPanier/panierMaster.css" rel="stylesheet"></link>
	</ui:define>
	
	<ui:define name="content" >
		<div class="container" id="conM">
			<div class="row" id="bod">
				<div class="col-md-9" id="basket">

					<div class="box">

						<h1 id="monPanier"> Mon panier</h1>

						<div class="table-responsive">
							<table class="table">
								<thead>
									<tr>
										<th colspan="2">Produit</th>
										<th>Quantité</th>
										<th>Packaging</th>
										<th>Prix unitaire <span> / €</span></th>
										<th colspan="2">Total <span> / €</span></th>
									</tr>
								</thead>
								<!-- partie a remplir dans le panier-->
								<tbody>
									<ui:repeat var="lgnCmd" value="#{mbAfficheProduits.ligneComandes}"> 
									<tr class="ligneProduit">
										<td>
 										<a href="#"> 
										<h:graphicImage value="#{lgnCmd.produit.image.chemin}"/>
<!-- 										<img src="#{prodCom.id}" alt="produit selectionné"></img> -->
										</a>
										</td>
										
<!-- 										<td><a href="#"><strong><U>carottes </U></strong>c'est -->
<!-- 												bon</a></td> -->
										<td><h:outputLabel value="#{lgnCmd.produit.type.libelle}"/></td>
										<td><input id="quantiteProduit" type="number" value="#{lgnCmd.quantiteCommandee}" class="form-control"></input></td>
                						<td>#{lgnCmd.produit.packaging.libelle}</td>
                						<td id="prixProduit">#{lgnCmd.produit.prixUnitaire} </td>
										<td ><i id="totalProduit"></i></td>
									</tr>
									</ui:repeat>
									
								</tbody>
								<tfoot  >
									<tr>
										<th colspan="5">Total<span> / €</span></th>
										<th colspan="2"><i id="totaux"></i></th>
									</tr>
								</tfoot>
							</table>
							

						</div>
						<!-- /.table-responsive -->

						<div class="box-footer">
							<div class="pull-left">
								<a href="pageCatalogue2.xhtml" class="btn btn-default"><i
									class="fa fa-chevron-left"></i> Continuer mes achats</a>
							</div>
							<div class="pull-right">
							
										<A href="http://localhost:18080/Anarmorix_FrontWeb/paiement.jsf">
											<button type="button" class ="btn my-cart-btn text-center" >
											commander</button>
										</A>
							
<!-- 								<button type="submit" class="btn btn-primary"> -->
<!-- 									commander<a href="paiement.xhtml"></a> <i class="fa fa-chevron-right"></i> -->
<!-- 								</button> -->
							</div>
						</div>
					</div>
				</div>

				<div class="col-md-3" id="basket">
					<div class="box">
						<div class="row">
							<div class="pull-center">
								<h3>Nom point relais</h3>
								<span>Adresse</span><br /> <span>Horaires d'ouverture</span>
							</div>
							<div class="row">
								<div class="pull-center">
									<h3 id="totaux"></h3>
								</div>
							</div>
						</div>
						<div class="box-footer">
							<div class="row">
								<div class="pull-center">
								
								
<!-- 							<A href="http://localhost:18080/Anarmorix_FrontWeb/paiement.jsf"> -->
									<h:form>
								    <h:commandButton styleClass="btn" value="Commander"
								                     action="#{mbAfficheProduits.ajouterLigneCommandeEnBAse}"/>
<!-- 											<button type="button" class ="btn my-cart-btn text-center" > -->
<!-- 											commander</button> -->
<!-- 										</A> -->
									</h:form>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>

			<div class="row">

				<div class="col-md-9" id="basket">
					<div class="box">

						<h3 class="vendre">vous aimerez peut etre aussi...</h3>
					</div>
				</div>
			</div>



			<!-- Partie propostion de produits : -->



			<div class="row">

				<div class="col-md-4">
					<div class="box-fix" id="basket ">
						<div class="box">

							<div class="row">

								<div class=" col-md-4 suggestionProduitImage" id="mesProduit">
									<a href="http://www.google.fr"><img class="imgProduit"
										src="resources/img/Fraise.jpg" href="https://www.google.fr"></img></a>
								</div>

								<div class="col-md-7 suggestionProduit">

									<a class="fort" href="http://www.google.fr"><strong><U>Fraise gariguette.</U></strong> Réputées pour leur saveur,
									 leur parfum et leur chair juteuse à souhait, les fraises ‘Gariguette’ sont de couleur rouge-orangé et de forme
									  allongée. Précoces...</a>

								</div>
							</div>
							<div class="box-footer">
								<div class="row validation">
									<div class="col-md-5 priceProduit p">
										<p>
											<b><u> Prix : 10.99 €/Kg </u></b>
										</p>
									</div>


									<div class="col-md-5 validerBtn">
										<button type="submit" class="addCart btn btn-primary">Ajouter
											au panier</button>
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="box-fix" id="basket ">
						<div class="box">

							<div class="row">

								<div class=" col-md-4 suggestionProduitImage">
									<a href="http://www.google.fr"><img class="imgProduit"
										src="resources/img/gala.jpg" href="https://www.google.fr"></img></a>
								</div>

								<div class="col-md-7 suggestionProduit">

									<a class="fort" href="http://www.google.fr"><strong><U> Pomme Gala.  </U><dd></dd>
									</strong>  Rouge orangé à rayures verticales, très sucrée,
									 faiblement acide avec une petite pointe d’amertume, ferme et juteuse, très croquante...</a>

								</div>
							</div>
							<div class="box-footer">
								<div class="row validation">
									<div class="col-md-5 priceProduit p">
										<p>
											<b><u> prix : 2.99 €/Kg </u></b>
										</p>
									</div>
									<div class="col-md-5 validerBtn">
										<button type="submit" class="addCart btn btn-primary">Ajouter
											au panier</button>
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="col-md-4">
					<div class="box-fix" id="basket ">
						<div class="box">

							<div class="row">

								<div class=" col-md-4 suggestionProduitImage">
									<a href="http://www.google.fr"><img class="imgProduit"
										src="resources/img/poire.jpg" href="https://www.google.fr"></img></a>
								</div>

								<div class="col-md-7 suggestionProduit">

									<a class="fort" href="http://www.google.fr"><strong><U>Poire conference. </U></strong>
									De forme allongée, sa robe de couleur vert- jaune. En bouche, elle est fine et fondante. Juteuse et parfumée, elle a une saveur légèrement acidulée...</a>

								</div>
							</div>
							<div class="box-footer">
								<div class="row validation">
									<div class="col-md-5 priceProduit p">
										<p>
											<b><u> prix : 3.55 €/Kg </u></b>
										</p>
									</div>


									<div class="col-md-5 validerBtn">
										<button type="submit" class="addCart btn btn-primary">Ajouter
											au panier</button>
									</div>

								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	
	</ui:define>

	<!-- *** SCRIPTS TO INCLUDE ***
 _________________________________________________________ -->
	<ui:define name="script">
	<script src="resources/js/jquery-1.11.0.min.js"></script>
	<script src="resources/js/bootstrap.min.js"></script>
	<script src="resources/js/jquery.cookie.js"></script>
	<script src="resources/js/waypoints.min.js"></script>
	<script src="resources/js/bootstrap-hover-dropdown.js"></script>
	<script src="resources/js/owl.carousel.min.js"></script>
	<script src="resources/js/front.js"></script>
	
	<script type="text/javascript">
	 //<![CDATA[
	 var totau = 0;
	 $(".ligneProduit").each(function() {
		var qt = $($(this).find('#quantiteProduit')[0]).val();
		var prix = $(this).find("#prixProduit").html();
		var cout = qt * prix;
		qt = Math.trunc(qt*100)/100;
		cout = Math.trunc(cout*100)/100;
		$(this).find('#totalProduit').append(cout);
		cout = Math.trunc(cout*100)/100;
		totau += cout;
		totau = Math.trunc(totau*100)/100;
		
		$($(this).find('#quantiteProduit')[0]).on('change', function(){
				var qt = $(this).val();
				var prix = $(this).closest('.ligneProduit').find("#prixProduit").html();
				var cout = qt * prix;
				cout = Math.trunc(cout*100)/100;
				$(this).closest('.ligneProduit').find('#totalProduit').html(cout);
					totau = 0;
				$(".ligneProduit").each(function() {
					var qt = $($(this).find('#quantiteProduit')[0]).val();
					var prix = $(this).find("#prixProduit").html();
					var cout = qt * prix;
					totau += cout;
					totau = Math.trunc(totau*100)/100;
					 $('#totaux').html(totau);
				});
		});
				
	 });
	 $('#totaux').html(totau);
	  //]]>
	</script>
	</ui:define>
	</ui:composition>

	
</html>